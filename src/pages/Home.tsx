import React, { useState } from 'react';
import { IonContent, IonHeader, IonPage, IonToolbar, IonModal, IonSlides, IonSlide, IonRow, IonGrid, IonCol, IonText } from '@ionic/react';

import logo_regente from '../img/logo_regente_branco.svg';


import { IonMenuButton, IonButtons, IonIcon } from '@ionic/react';

import { millisToDaysHoursMinutes, pad, verifyTimeLeft } from '../../src/dateFunctions';
import { feedbackSocialDist, feedbackContactN } from '../../src/feedbackContatoFunctions';
import { feedbackLight } from '../../src/feedbackLightFunctions';
import { feedbackHobbies, feedbackExercise } from '../../src/feedbackHabitosFunctions';
import { IMC } from '../../src/feedbackIMCFunctions';
import { feedbackFumo, feedbackAlcool, feedbackMed } from '../../src/feedbackSaudeFunctions';
import { bemEstar } from '../../src/feedbackBemEstarFunctions';
import { feedbackSono } from '../../src/feedbackSono';
import { regularides } from '../../src/feedbackRegularidesFunction';
import { feedbackSD4 } from '../../src/feedbackContatoFunctions';
import {feedbackRMEQ} from '../../src/feedbackRMEQfunction';

import { IonButton, IonLoading } from '@ionic/react';
import { construct, share, shareSocial, shareSocialOutline } from 'ionicons/icons';

import { useHistory } from 'react-router-dom'

import { logoutUser } from '../../src/firebaseConfig/firebaseConfig';
import { toast } from '../toast';

import { chatbubbleOutline, statsChartOutline } from 'ionicons/icons';

import { useUser } from 'reactfire';

import firebase from 'firebase';

import {
  Accordion,
  AccordionItem,
  AccordionItemHeading,
  AccordionItemButton,
  AccordionItemPanel,
} from 'react-accessible-accordion';

import 'react-accessible-accordion/dist/fancy-example.css';

import button_saude from '../img/button_saude.svg';
import button_contato from '../img/button_contato.svg';
import button_habitos from '../img/button_habitos.svg';
import button_sono from '../img/button_sono.svg';
import matutino_feliz from '../img/Matutino_feliz.svg';
import intermed_feliz from '../img/Neutro_feliz.svg';
import vespertino_feliz from '../img/Vespertino_feliz.svg';

import matutino_cansado from '../img/Matutino_cansado.svg';
import intermed_cansado from '../img/Neutro_cansado.svg';
import vespertino_cansado from '../img/Vespertino_cansado.svg';

import sono_feedback from '../img/sono_feedback.svg';
import sol from '../img/Sono_1.svg';
import contato_social from '../img/Covid_4.svg'
import imc from '../img/Sono_5.svg';

import matutino_wave from '../img/Matutino_boas-vindas.svg';
import intermed_wave from '../img/Neutro_boas-vindas.svg';
import vespertino_wave from '../img/Vespertino_boas-vindas.svg';

import matutino_corda from '../img/matutino_corda.svg';
import vespertino_corda from '../img/vespertino_corda.png';
import intermed_corda from '../img/intermed_corda.png';
import teste_imagem from '../img/distanciamentoExp.png';

import home_intermed from '../img/home_intermed.png';
import home_vespertino from '../img/home_matutino.png';
import home_matutino from '../img/home_vespertino.png';
import home_gif from '../img/Home-gif.gif';

import sono3 from '../img/Sono_3.svg';

import { VerticalTimeline, VerticalTimelineElement } from 'react-vertical-timeline-component';

import 'react-vertical-timeline-component/style.min.css';
import './Home.css';

import { format, sub } from 'date-fns';
import { diffHoursMinutes } from '../dateFunctions';
import { timeStampToFloat } from '../dateFunctions';

import { PDFGenerator } from '@ionic-native/pdf-generator';
import { SocialSharing } from '@ionic-native/social-sharing';

import { arrowForwardOutline, arrowBackOutline } from 'ionicons/icons';
import { LocalNotifications } from '@awesome-cordova-plugins/local-notifications';



const Tab1: React.FC = () => {


  const [loader, setLoader] = useState<boolean>(false);
  const [showModalFeedbackInicial, setShowModalFeedbackInicial] = useState(false);
  const [showModalFeedbackPost, setShowModalFeedbackPost] = useState(false);
  const [showModalFeedbackFinal, setShowModalFeedbackFinal] = useState(false);
  const [showModalSonoSintomas, setShowModalSonoSintomas] = useState(false);


  function chamaSobre() {
    history.push('/sobre');
  }

  function chamaPerfil() {
    history.push('/perfil');
  }

  async function Logout() {
    setLoader(true)
    const res = await logoutUser();

    if (res === true) {
      toast('Logout efetuado!')
      history.replace('/login');
      setLoader(false);

    }
  }

  function checkIfEmailVerified() {
    return user.emailVerified;
  }

  const history = useHistory();

  function saude() {
    history.push('/saude');
  }

  function contato() {

    history.push('/contatosocial')

  }

  function habitos() {
    history.push('/habitos');
  }

  function sonoSintomas() {
    history.push('/sonosintomas');
    setShowModalSonoSintomas(true);
  }

  function saudePost() {
    history.push('/saudePost');
  }

  function contatoPost() {
    history.push('/contatoPost');
  }

  function habitosPost() {
    history.push('/habitosPost');
  }

  function sonosintomasPost() {
    history.push('/sonosintomasPost');
    setShowModalSonoSintomas(true);
  }

  function saudeFinal() {
    history.push('/saudeFinal');
  }

  function contatoFinal() {
    history.push('/contatoFinal');
  }

  function habitosFinal() {
    history.push('/habitosFinal');
  }

  function sonoSintomasFinal() {
    history.push('/sonoSintomasFinal');
    setShowModalSonoSintomas(true);
  }

  function feedbackInicial() {
    history.push('/feedbackinicial');
  }

  function toAderencia() {
    history.push('/aderencia');
  }

  function toAderenciaPost() {
    history.push('/aderencia1post');
  }

  function toAderenciaFinal() {
    history.push('/aderencia1final');
  }


  const [moduloSaudeEnviado, setSaudeModulo1Enviado] = React.useState(false);
  const [moduloContatoEnviado, setContatoModulo1Enviado] = React.useState(false);
  const [moduloHabitosEnviado, setHabitosModulo1Enviado] = React.useState(false);
  const [moduloSonoSintomasEnviado, setSonoSintomasModulo1Enviado] = React.useState(false);

  const [moduloSaudePostEnviado, setSaudePostEnviado] = React.useState(false);
  const [moduloContatoPostEnviado, setContatoPostEnviado] = React.useState(false);
  const [moduloHabitosPostEnviado, setHabitosPostEnviado] = React.useState(false);
  const [moduloSonoSintomasPostEnviado, setSonoSintomasPostEnviado] = React.useState(false);

  const [moduloSaudeFinalEnviado, setSaudeFinalEnviado] = React.useState(false);
  const [moduloContatoFinalEnviado, setContatoFinalEnviado] = React.useState(false);
  const [moduloHabitosFinalEnviado, setHabitosFinalEnviado] = React.useState(false);
  const [moduloSonoSintomasFinalEnviado, setSonoSintomasFinalEnviado] = React.useState(false);

  const [meta1Definida, setMeta1Definida] = React.useState(false);
  const [meta2Definida, setMeta2Definida] = React.useState(false);
  const [meta3Definida, setMeta3Definida] = React.useState(false);

  const [minDaysPart1, setMinDaysPart1] = React.useState(false);
  const [minDaysPart2, setMinDaysPart2] = React.useState(false);


  const [firstPartText, setFirstPartText] = React.useState("Finalize o formul√°rio e acesse todas as dicas personalizadas!")
  const [secondPartText, setSecondPartText] = React.useState("Falta preencher a parte anterior")
  const [thirdPartText, setThirdPartText] = React.useState("Falta preencher a parte anterior")

  const [imgHome, setimgHome] = React.useState();

  const [feedbackCIText, setfeedbackCIText] = React.useState("Carregando feedback...")
  const [feedbackCI2Text, setfeedbackCI2Text] = React.useState("Carregando  feedback...")
  const [feedbackLightText, setFeedbackLightText] = React.useState("Carregando feedback...")
  const [feedbackHobbiesText, setFeedbackHobbiesText] = React.useState("")
  const [feedbackExerciseText, setFeedbackExerciseText] = React.useState("Carregando feedback...")
  const [feedbackIMCText, setFeedbackIMCText] = React.useState("Carregando o feedback...")
  const [feedbackFumoText, setFeedbackFumoText] = React.useState("")
  const [feedbackAlcoolText, setFeedbackAlcoolText] = React.useState("")
  const [feedbackBemEstarText, setFeedbackBemEstarText] = React.useState("")
  const [feedbackMedText, setFeedbackMedsText] = React.useState("")
  const [feedbackSonoText, setFeedbackSonoText] = React.useState("Carregando feedback...")
  const [feedbackCronoText, setFeedbackCronoText] = React.useState('Carregando feedback...')
  const [feedbackRegularidadesText, setFeedbackRegularidadesText] = React.useState("Carregando o feedback...")
  const [feedbackSD4Text, setFeedbackSD4Text] = React.useState("Carregando o feedback...")
  const [feedbackRMEQText, setFeedbackRMEQText] = React.useState("Carregando o feedback...")

  const [cronoImage, setCronoImage] = React.useState("Carregando feedback...")

  const [feedbackSJLText, setFeedbackSJLText] = React.useState("")
  const [vespSJLText, setVespSJLText] = React.useState("")

  const [swiper, setSwiper] = useState<any>({});
  const init = async function (this: any) {
    setSwiper(await this.getSwiper());
  };
  const handleNext = () => {
    swiper.slideNext();
  }

  const handlePrevious = () => {
    swiper.slidePrev();
  }

  const { data: user } = useUser();
  const db = firebase.firestore();
  const uid = user.uid

  function converToHoursAndMinutes(hours: number) {
    let hour: number = Math.trunc(hours)
    let minutes: number = Math.round((hours - hour) * 60)
    return hour + ":" + minutes
  }

  async function getSaudeDate() {
    const dbRef = await db.collection('users').doc(uid).get();
    const data = (await dbRef).data();

    if (data != undefined) {
      const data2: any = data;
      const dataSaude = data2.dateSaudeModule1;

      console.log("dataSaude: " + dataSaude)

      if (!(dataSaude === undefined)) {
        setSaudeModulo1Enviado(true)
      }
    }
  }

  async function getContatoDate() {
    const dbRef = await db.collection('users').doc(uid).get();
    const data = (await dbRef).data();

    if (data != undefined) {
      const data2: any = data;
      const dataContato = data2.dateContatoModule1;

      if (!(dataContato === undefined)) {
        setContatoModulo1Enviado(true)
      }
      console.log("1:" + moduloSaudeEnviado)
      console.log("2:" + moduloContatoEnviado)
    }
  }

  async function getSonoSintomasDate() {
    const dbRef = await db.collection('users').doc(uid).get();
    const data = (await dbRef).data();
    if (data !== undefined) {
      const data2: any = data;
      const dataSonoSintomas = data2.dateSonoSintomasModule1;


      if (!(dataSonoSintomas === undefined)) {
        setSonoSintomasModulo1Enviado(true)
        setFirstPartText("Obrigado! Acesse agora as dicas personalizadas e defina suas metas!")
      }

      console.log("dataSonoSintomas: " + verifyTimeLeft(dataSonoSintomas))

      if (verifyTimeLeft(dataSonoSintomas) == "Modulo liberado") {
        //passou 14 dias
        setMinDaysPart1(true)
        setSecondPartText("")

      } else {
        setSecondPartText(verifyTimeLeft(dataSonoSintomas))
      }


    }
  }



  async function getHabitosDate() {
    const dbRef = await db.collection('users').doc(uid).get();
    const data = (await dbRef).data();

    if (data != undefined) {
      const data2: any = data;
      const dataHabitos = data2.dateHabitosModule1;

      if (!(dataHabitos === undefined)) {
        setHabitosModulo1Enviado(true)
      }
    }
  }

  //post functions

  async function getSaudesPostDate() {
    const dbRef = await db.collection('usersPost').doc(uid).get()
    const data = (await dbRef).data();

    if (data !== undefined) {

      const data2: any = data;
      const dateSaudePost = data2.dateSaudePost;

      if (!(dateSaudePost === undefined)) {
        setSaudePostEnviado(true)
      }
    }
  }


  async function getContatoPostDate() {
    const dbRef = await db.collection('usersPost').doc(uid).get();
    const data = (await dbRef).data();

    if (data !== undefined) {
      const data2: any = data;
      const dataContatoPost = data2.dateContatoPost;

      if (!(dataContatoPost === undefined)) {
        setContatoPostEnviado(true);
      }
    }
  }

  async function getHabitosPostDate() {
    const dbRef = await db.collection('usersPost').doc(uid).get();
    const data = (await dbRef).data()

    if (data !== undefined) {

      const data2: any = data
      const dataHabitosPost = data2.dateHabitosPost;

      if (!(dataHabitosPost === undefined)) {
        setHabitosPostEnviado(true);
      }
    }
  }

  async function getSonoSintomasPostDate() {
    const dbRef = await db.collection('usersPost').doc(uid).get();
    const data = (await dbRef).data();

    if (data !== undefined) {
      const data2: any = data;
      const dataSonoSintomasPost = data2.dateSonoSintomasPost;

      if (!(dataSonoSintomasPost === undefined)) {
        setSonoSintomasPostEnviado(true);
      }

      console.log("verify: " + verifyTimeLeft(dataSonoSintomasPost))
      if (verifyTimeLeft(dataSonoSintomasPost) == "Modulo liberado") {
        //passou 14 dias
        setMinDaysPart2(true)
        setThirdPartText("")
      } else {
        setThirdPartText(verifyTimeLeft(dataSonoSintomasPost))
      }
    }
  }

  //final functions

  async function getSaudesFinalDate() {
    const dbRef = await db.collection('usersPost').doc(uid).get();
    const data = (await dbRef).data();

    if (data !== undefined) {
      const data2: any = data;
      const dataSaudeFinal = data2.dateSaudeFinal;

      if (!(dataSaudeFinal === undefined)) {
        setSaudeFinalEnviado(true);
      }
    }
  }

  async function getContatoFinalDate() {
    const dbRef = await db.collection('usersPost').doc(uid).get();
    const data = (await dbRef).data();

    if (data !== undefined) {
      const data2: any = data;
      const dataContatoFinal = data2.dateContatoFinal;

      if (!(dataContatoFinal === undefined)) {
        setContatoFinalEnviado(true);
      }
    }
  }

  async function getHabitosFinalDate() {
    const dbRef = await db.collection('usersPost').doc(uid).get();
    const data = (await dbRef).data();

    if (data !== undefined) {
      const data2: any = data;
      const dataHabitosFinal = data2.dateHabitosFinal;

      if (!(dataHabitosFinal === undefined)) {
        setHabitosFinalEnviado(true);
      }
    }
  }

  async function getSonoSintomasFinalDate() {
    const uid = user.uid
    const dbRef = await db.collection('usersPost').doc(uid).get();
    const data = (await dbRef).data();

    if (data !== undefined) {
      const data2: any = data;
      const dataSonoSintomasFinal = data2.dateSonoSintomasFinal;

      if (!(dataSonoSintomasFinal === undefined)) {
        setSonoSintomasFinalEnviado(true);
      }
    }
  }

  async function getFeedbackHabitos() {
    const dbRef = await db.collection('users').doc(uid).get();
    const data = (await dbRef).data();
    if (data !== undefined) {
      const data2: any = data;
      const dataHobbiesFreq = data2.hobbiesFreq;
      const dataExercise = data2.exercise;

      if (feedbackHobbies(dataHobbiesFreq) === "string1") {
        setFeedbackHobbiesText("‚ÄãReservar um tempo para atividades de lazer pode ser importante para a sua s√°ude mental. Ser√° que voc√™ conseguiria implementar esse h√°bito na sua semana? Que tal praticar algo que voc√™ goste por 30 minutos na semana e aumentar esse tempo de forma gradual?")
      }

      if (feedbackExercise(dataExercise) === "string1") {
        setFeedbackExerciseText("Voc√™ nos contou que pratica exerc√≠cios f√≠sicos. Este √© um h√°bito que torna sua vida mais saud√°vel. Tente continuar praticando e atente para o m√≠nimo recomendado pelas √≥rg√£os oficiais. O que √© recomendado para adultos √© praticar, por semana, pelo menos 150 min de atividades f√≠sicas moderadas (aquelas em que voc√™ consegue conversar com dificuldade enquanto se movimenta, mas n√£o consegue cantar; sua respira√ß√£o e os batimentos do cora√ß√£o v√£o aumentar moderadamente), ou ent√£o 75 min de atividades vigorosas (em que voc√™ n√£o vai conseguir nem conversar; sua respira√ß√£o vai ser muito mais r√°pida que o normal, e os batimentos do seu cora√ß√£o v√£o aumentar muito). Voc√™ pode dividir a sua pr√°tica de atividade f√≠sica em pequenos blocos de tempo ou fazer mais minutos por dia, de uma s√≥ vez. Fa√ßa como preferir e como puder! Ter um dia a dia fisicamente ativo √© bastante seguro. Se voc√™ tiver alguma les√£o ou sentir algum desconforto anormal, como alguma dor na regi√£o do peito ou tontura, procure a Unidade B√°sica de Sa√∫de mais pr√≥xima de voc√™.  ")
      } else if (feedbackExercise(dataExercise) === "string2") {
        setFeedbackExerciseText("Voc√™ nos contou que n√£o pratica exerc√≠cios f√≠sicos. Voc√™ poderia planejar como inclu√≠-los na sua semana. Esse √© o primeiro passo e este h√°bito vai tornar sua vida mais saud√°vel! O que √© recomendado para adultos √© praticar, por semana, pelo menos 150 min de atividades f√≠sicas moderadas (aquelas em que voc√™ consegue conversar com dificuldade enquanto se movimenta, mas n√£o consegue cantar; sua respira√ß√£o e os batimentos do cora√ß√£o v√£o aumentar moderadamente), ou ent√£o 75 min de atividades vigorosas (em que voc√™ n√£o vai conseguir nem conversar; sua respira√ß√£o vai ser muito mais r√°pida que o normal, e os batimentos do seu cora√ß√£o v√£o aumentar muito).  Voc√™ pode dividir a sua pr√°tica de atividade f√≠sica em pequenos blocos de tempo ou fazer mais minutos por dia, de uma s√≥ vez. Fa√ßa como preferir e como puder! Ter um dia a dia fisicamente ativo √© bastante seguro. Se voc√™ tiver alguma les√£o ou sentir algum desconforto anormal, como alguma dor na regi√£o do peito ou tontura, procure a Unidade B√°sica de Sa√∫de mais pr√≥xima de voc√™.  ")
      }

    }
  }

  async function getIMC() {
    const dbRef = await db.collection('users').doc(uid).get();
    const data = (await dbRef).data();
    if (data !== undefined) {
      const data2: any = data;
      const dataAge = data2.age;
      const dataSex = data2.sex;
      const dataWeight = data2.weight;
      const dataHeight = data2.height;


      if (IMC(dataAge, dataSex, dataWeight, dataHeight) === "string1") {
        setFeedbackIMCText("IMC: < 18,5. Considerando o que voc√™ nos contou sobre seu peso e sua altura, conseguimos identificar que o seu peso est√° abaixo do ideal. Fique atento e procure um m√©dico ou um nutricionista para uma avalia√ß√£o. Um IMC abaixo de 18,5 √© considerado baixo peso.")
      } else if (IMC(dataAge, dataSex, dataWeight, dataHeight) === "string2") {
        setFeedbackIMCText("IMC: 18,5-24,9. Considerando o que voc√™ nos contou sobre seu peso e sua altura, conseguimos identificar que seu peso est√° na faixa normal. O IMC √© considerado normal quando entre 18,5 e 24,9.")
      } else if (IMC(dataAge, dataSex, dataWeight, dataHeight) === "string3") {
        setFeedbackIMCText("IMC: >25. Considerando o que voc√™ nos contou sobre seu peso e sua altura, conseguimos identificar que voc√™ est√° um pouco acima do peso ideal. Voc√™ pode procurar um m√©dico ou um nutricionista para uma avalia√ß√£o. A pr√°tica de exerc√≠cio f√≠sico regular, alimenta√ß√£o saud√°vel e rotina de sono tamb√©m podem auxiliar voc√™.")
      } else if (IMC(dataAge, dataSex, dataWeight, dataHeight) === "string4") {
        setFeedbackIMCText("IMC: < 18,5. Considerando o que voc√™ nos contou sobre seu peso e sua altura, conseguimos identificar que o seu peso est√° abaixo do ideal. Na sua faixa et√°ria, baixo peso pode estar associado com outros problemas de sa√∫de. Fique atento e procure um m√©dico ou um nutricionista para uma avalia√ß√£o. Um IMC abaixo de 18,5 √© considerado baixo peso.")
      } else if (IMC(dataAge, dataSex, dataWeight, dataHeight) === "string5") {
        setFeedbackIMCText("IMC: 18,5-24,9. Considerando o que voc√™ nos contou sobre seu peso e sua altura, conseguimos identificar que seu peso est√° na faixa normal para a popula√ß√£o adulta. No entanto, na sua faixa et√°ria, os valores podem ser um pouco diferentes. Para uma avalia√ß√£o nutricional, mais completa procure sua unidade de sa√∫de ou m√©dico de refer√™ncia.")
      } else if (IMC(dataAge, dataSex, dataWeight, dataHeight) === "string6") {
        setFeedbackIMCText("IMC: >25. Considerando o que voc√™ nos contou sobre seu peso e sua altura, conseguimos identificar que voc√™ est√° um pouco acima do peso ideal para a popula√ß√£o adulta. No entanto, na sua faixa et√°ria, os valores podem ser um pouco diferentes. Para uma avalia√ß√£o nutricional mais completa, procure sua unidade de sa√∫de ou m√©dico de refer√™ncia. A pr√°tica de exerc√≠cio f√≠sico regular, alimenta√ß√£o saud√°vel e rotina de sono tamb√©m podem auxiliar voc√™.")
      } 
    }
  }

  async function getFeedbackLight() {
    const dbRef = await db.collection('users').doc(uid).get();
    const data = (await dbRef).data();
    if (data !== undefined) {
      const data2: any = data;
      
      const dataLight = data2.lightExposure;
      const dataLightReg = data2.lightReg;
      const dataLightFreq = data2.lightFreq;

      console.log('datas da luz: ' + dataLight );
      console.log('datas da luz: ' + dataLightReg );
      console.log('datas da luz: ' + dataLightFreq );

      if (feedbackLight(dataLight, dataLightReg, dataLightFreq) === "string1") {
        setFeedbackLightText("Voc√™ nos contou que n√£o tem se exposto √† luz natural. Voc√™ sabia que a exposi√ß√£o √† luz natural traz benef√≠cios para a sa√∫de, bem-estar e sono? Se permanece muito em espa√ßos internos, tente realizar suas atividades ou se sentar de frente para uma janela. Se puder estar em espa√ßos externos, lembre que para se expor √† luz natural n√£o precisa estar exposto diretamente ao sol. Nesse caso, cuide com o sol nos hor√°rios mais nocivos √† pele e use filtro solar. D√™ prefer√™ncia ao turno da manh√£ e tente ter exposi√ß√£o √† luz natural todos os dias. Quanto mais melhor, mas trinta minutos j√° ajudam!")

      } else if (feedbackLight(dataLight, dataLightReg, dataLightFreq) === "string2") {
        setFeedbackLightText("Voc√™ nos contou que se exp√µe √† luz natural, mas ser√° que consegue melhorar esse h√°bito? A luz natural traz benef√≠cios para a sa√∫de, bem-estar e sono. Tente se expor todos os dias e d√™ prefer√™ncia ao turno da manh√£. Quanto mais melhor, mas trinta minutos j√° ajudam! Se permanece muito em espa√ßos internos, tente realizar suas atividades ou se sentar de frente para uma janela. No caso de espa√ßos externos, lembre que para se expor √† luz natural n√£o precisa estar exposto diretamente ao sol. Cuide com o sol nos hor√°rios mais nocivos √† pele e use filtro solar.")
      }

     else if (feedbackLight(dataLight, dataLightReg, dataLightFreq) === "string3") {
      setFeedbackLightText("Voc√™ tem se exposto √† luz natural e esse h√°bito √© super importante para a sua sa√∫de! Tente manter uma exposi√ß√£o di√°ria e d√™ prefer√™ncia ao turno da manh√£.")
    }

    }
  }

  async function getFeedbackSaude() {
    const dbRef = await db.collection('users').doc(uid).get();
    const data = (await dbRef).data();
    if (data !== undefined) {
      const data2: any = data;
      const dataSmoke = data2.smoke;
      const dataAlcool = data2.cage04;
      const dataMedsOff = data2.medsOff;

      if (feedbackMed(dataMedsOff) === "string01") {
        setFeedbackMedsText("Algumas medica√ß√µes podem ser prejudiciais a sua sa√∫de quando utilizadas sem indica√ß√£o m√©dicas, especialmente medica√ß√µes controladas como antibi√≥ticos, rem√©dios para depress√£o/ansiedade e rem√©dios para dormir. Caso voc√™ ache que precise de alguma medica√ß√£o acima, busque por profissionais que possam lhe ajudar. Medica√ß√µes para tratamento de doen√ßas cr√¥nicas, como diur√©ticos, podem n√£o ser uteis para voc√™. Evite tom√°-las se voc√™ n√£o recebeu uma prescri√ß√£o m√©dica ou de algum outro profissional de sa√∫de. Algumas medica√ß√µes comuns que n√£o necessitam de prescri√ß√£o (receita m√©dica), como anti-inflamat√≥rios, podem ser prejudiciais para voc√™, principalmente quando utilizadas com frequ√™ncia.")
      }

      if (feedbackFumo(dataSmoke) === "string01") {
        setFeedbackFumoText("Voc√™ nos contou que fuma. J√° pensou em parar de fumar? O SUS oferece tratamento gratuito para auxiliar voc√™ nessa! Procure uma unidade de sa√∫de ou um profissional de sa√∫de para receber mais orienta√ß√µes.")
      }
      if (feedbackAlcool(dataAlcool) === "string01") {
        setFeedbackAlcoolText("Vimos que voc√™ relatou beber pela manh√£, o que √© um comportamento considerado pouco saud√°vel. O consumo de √°lcool em excesso √© considerado um problema de sa√∫de. Se isso tem incomodado voc√™, procure um profissional de sa√∫de para uma avalia√ß√£o.")
      }
    }
  }

  async function getFeedbackContatoInicial() {

    const dbRef = await db.collection('users').doc(uid).get();
    const data = (await dbRef).data();
    if (data !== undefined) {
      const data2: any = data;
      const dataSocialDist = data2.socialDist;
      const dataContactN = data2.contactN;
      const datasd4 = data2.sd4;

      if (feedbackSocialDist(dataSocialDist) === "string1") {
        setfeedbackCIText("Voc√™ nos contou que est√° seguindo as medidas de distanciamento social. Parab√©ns! Sabemos que pode estar mais dif√≠cil manter o distanciamento social ao longo do tempo, mas seu esfor√ßo salva vidas!")
      } else if (feedbackSocialDist(dataSocialDist) === "string2") {
        setfeedbackCIText("Voc√™ nos contou que n√£o est√° seguindo as medidas de distanciamento social na maior parte do tempo. Sabemos que est√° sendo cada dia mais dif√≠cil manter o distanciamento social, mas evitar aglomera√ß√µes √© essencial para impedir que o v√≠rus se espalhe. Enquanto n√£o vacinamos a maior parte da popula√ß√£o, manter o distaciamento social continua sendo essencial para evitarmos nos contaminar e contaminar aos outros.")
      }

      if (feedbackContactN(dataContactN) === "string1") {
        setfeedbackCI2Text("Uma sugest√£o para tornar mais f√°cil o distanciamento social √© manter o contato e conversar com pessoas queridas, mesmo que por telefone ou mensagem. Isso diminui a nossa ansiedade e pode ser uma boa ferramenta no enfrantamento deste momento.")
      } else if (feedbackContactN(dataContactN) === "string2") {
        setfeedbackCI2Text("Voc√™ tamb√©m nos contou que mant√©m contato social diariamente. Algum tipo de contato com pessoas que nos fazem bem, mesmo que √† dist√¢ncia, √© essencial pra nos ajudar a encarar esse momento.")
      }

      if (feedbackSD4(datasd4) === "string2") {
        setFeedbackSD4Text("Voc√™ nos contou que est√° seguindo as medidas de distanciamento social. Parab√©ns! Sabemos que pode estar mais dif√≠cil manter o distanciamento social ao longo do tempo, mas seu esfor√ßo salva vidas!")
      } else if (feedbackSD4(datasd4) === "string1") {
        setFeedbackSD4Text("Voc√™ nos contou que n√£o est√° seguindo as medidas de distanciamento social na maior parte do tempo. Sabemos que est√° sendo cada dia mais dif√≠cil manter o distanciamento social, mas evitar aglomera√ß√µes √© essencial para impedir que o v√≠rus se espalhe. Enquanto n√£o vacinamos a maior parte da popula√ß√£o, manter o distaciamento social continua sendo essencial para evitarmos nos contaminar e contaminar aos outros.")
      }
    }
  }

  async function getFeedbackBemEstar() {
    const dbRef = await db.collection('users').doc(uid).get();
    const data = (await dbRef).data();
    if (data !== undefined) {
      const data2: any = data;
      const dataSomaGad = data2.gad7_gad01 + data2.gad7_gad02 + data2.gad7_gad03 + data2.gad7_gad04 + data2.gad7_gad05 + data2.gad7_gad06 + data2.gad7_gad07;
      const dataSomaPHQ = data2.phq01 + data2.phq02 + data2.phq03 + data2.phq04 + data2.phq05 + data2.phq06 + data2.phq07 + data2.phq08 + data2.phq09 + data2.phq10;
      const dataPHQ09 = data2.phq09;

      
      if (bemEstar(dataSomaGad, dataSomaPHQ, dataPHQ09) === "string1") {
        setFeedbackBemEstarText("Pelas suas respostas, percebemos que talvez voc√™ n√£o esteja se sentindo bem emocionalmente. Caso voc√™ note que isso lhe incomoda ou que esteja causando preju√≠zos, afetando no seu trabalho, em atividades de casa e no conv√≠vio com outras pessoas, sugerimos que voc√™ busque a ajuda de um profissional da sa√∫de (psic√≥logo, psiquiatra ou m√©dico do posto de s√°ude). Caso voc√™ precise de ajuda com os pensamentos de se ferir ou de morte, ligue para o Centro de Valoriza√ß√£o da Vida (CVV) ou procure o posto de sa√∫de ou o Centro de Aten√ß√£o Psicossocial (CAPS) ou o Servi√ßo de Emerg√™ncia. O n√∫mero do CVV √© 188 e o website √© https://www.cvv.org.br/.")
      } else if (bemEstar(dataSomaGad, dataSomaPHQ, dataPHQ09) === "string2") {
        setFeedbackBemEstarText("Pelas suas respostas, percebemos que talvez voc√™ n√£o esteja se sentindo bem emocionalmente. Caso voc√™ note que isso lhe incomoda ou que esteja causando preju√≠zos, afetando no seu trabalho, em atividades de casa e no conv√≠vio com outras pessoas, sugerimos que voc√™ busque a ajuda de um profissional da sa√∫de (psic√≥logo, psiquiatra ou m√©dico do posto de s√°ude).")
      } else if (bemEstar(dataSomaGad, dataSomaPHQ, dataPHQ09) === "string3") {
        setFeedbackBemEstarText("Pelas suas respostas, percebemos que talvez voc√™ esteja se sentindo um pouco incomodado com algumas quest√µes. Caso voc√™ note que isso lhe incomoda ou que esteja causando preju√≠zos, afetando no seu trabalho, em atividades de casa e no conv√≠vio com outras pessoas, sugerimos que voc√™ busque a ajuda de um profissional da sa√∫de (psic√≥logo, psiquiatra ou m√©dico do posto de s√°ude). ")
      } 
    }
  }


  async function getFeedbackSono() {
    const dbRef = await db.collection('users').doc(uid).get();
    const data = (await dbRef).data();
    if (data !== undefined) {
      const data2: any = data;
      const dataWakeUpFD = data2.wakeUpFD;
      const dataSleepFD = data2.sleepFD;

      const dataSleepWD = data2.sleepWD;
      const dataWakeUpWD = data2.wakeUpWD;

      const dataSleepNoWork = data2.sleepNoWork;
      const dataWakeUpNoWork = data2.wakeUpNoWork;

      const dataAge = data2.age;

      const dataSomaRmeq = data2.rmeq01 + data2.rmeq02 + data2.rmeq03 + data2.rmeq04 + data2.rmeq05;
      if (feedbackRMEQ(dataSomaRmeq) === "mat"){
        setFeedbackRMEQText("...matutino. Isso significa que voc√™ se sente melhor dormindo mais cedo. Pessoas muito matutinas podem for√ßar-se a dormir mais tarde e por menos tempo quando t√™m alguma atividade social √† noite.")
      } else if (feedbackRMEQ(dataSomaRmeq) === "int"){
        setFeedbackRMEQText("...intermedi√°rio. Isso significa que voc√™ se sente bem com hor√°rios de sono nem t√£o cedo, nem t√£o tarde. A maioria das pessoas se encontra nesta categoria.")
      } 
      else if (feedbackRMEQ(dataSomaRmeq) === "ves"){
        setFeedbackRMEQText("...vespertino. Isso significa que voc√™ se sente bem acordando e dormindo mais tarde. Isso n√£o quer dizer que voc√™ tem pregui√ßa, j√° que essa √© uma caracter√≠stica biol√≥gica sua.")
      } 

      /*  if (feedbackSono(dataWakeUpFD, dataSleepFD, dataSleepWD, dataWakeUpWD) === "valores v√°lidos"){
          console.log('deu errado');
        } else if (feedbackSono(dataWakeUpFD, dataSleepFD, dataSleepWD, dataWakeUpWD) === "valores inv√°lidos"){
          console.log('deu certo');
        } */

      //feedback SONO com Work Days

      if ((dataSleepWD && dataWakeUpWD) !== (undefined || null || "undefined")) {
        console.log('n√£o t√° entrando aqui');

        var durationSonoFDFloat = diffHoursMinutes(dataWakeUpFD, dataSleepFD);
        var durationSonoFDString = converToHoursAndMinutes(durationSonoFDFloat);

        var durationSonoWDFloat = diffHoursMinutes(dataWakeUpWD, dataSleepWD);
        var durationSonoWDString = converToHoursAndMinutes(durationSonoWDFloat);

        var soWD = timeStampToFloat(dataSleepWD);
        var seWD = timeStampToFloat(dataWakeUpWD);

        var soFD = timeStampToFloat(dataSleepFD);
        var seFD = timeStampToFloat(dataWakeUpFD);

        console.log('so wd' + soWD);
        console.log('se wd' + seWD);
        console.log('so fd' + soFD);
        console.log('se FD' + seFD);


        //feedback cronotipo
        var midpointSleepWD = soWD + ((durationSonoWDFloat) / 2);
        var midpointSleepFD = soFD + ((durationSonoFDFloat) / 2);

        console.log('midpoint sleep wd' + midpointSleepWD);
        console.log('midpoint sleep fd' + midpointSleepFD);

        var msfsc;
        if (durationSonoFDFloat <= durationSonoWDFloat) {
          msfsc = midpointSleepFD;
        } else if (durationSonoFDFloat > durationSonoWDFloat) {
          msfsc = midpointSleepFD - ((durationSonoFDFloat - durationSonoWDFloat) / 2)
        }

        console.log('****************** msfsc: ' + msfsc);
        if (msfsc !== undefined) {
          console.log('entrou aqui msfsc: ' + msfsc);
          if (msfsc < 1.5) {
            setFeedbackCronoText('...matutino extremo. Isso significa que voc√™ se sente melhor dormindo mais cedo, o que pode ser uma vantagem em uma sociedade que inicia seus compromissos pela manh√£. No entanto, pessoas muito matutinas podem, √†s vezes, se for√ßar a dormir mais tarde quando t√™m alguma atividade social √† noite.')
            setCronoImage('1')
          } else if ((msfsc >= 1.5) && (msfsc < 3.5)) {
            setFeedbackCronoText('...matutino. Isso significa que voc√™ se sente melhor dormindo mais cedo, o que pode ser uma vantagem em uma sociedade que inicia seus compromissos pela manh√£. No entanto, pessoas muito matutinas podem, √†s vezes, se for√ßar a dormir mais tarde quando t√™m alguma atividade social √† noite.')
            setCronoImage('1')
          } else if ((msfsc >= 3.5) && (msfsc < 4.5)) {
            setFeedbackCronoText('...intermedi√°rio. Isso significa que voc√™ se sente bem com hor√°rios de sono nem t√£o cedo, nem t√£o tarde. A maioria das pessoas se encontra nesta categoria.')
            setCronoImage('2')
          } else if ((msfsc >= 4.5) && (msfsc < 6.5)) {
            setFeedbackCronoText('...vespertino. Isso significa que voc√™ se sente bem acordando e dormindo mais tarde. Isso n√£o quer dizer que voc√™ tem pregui√ßa, j√° que essa √© uma caracter√≠stica biol√≥gica sua.')
            setCronoImage('3')
          } else if ((msfsc >= 6.5)) {
            setFeedbackCronoText('...vespertino extremo. Isso significa que voc√™ se sente bem acordando e dormindo mais tarde. Isso n√£o quer dizer que voc√™ tem pregui√ßa, j√° que essa √© uma caracter√≠stica biol√≥gica sua.')
            setCronoImage('3')
          }
        } else {
          setFeedbackCronoText('N√£o foi poss√≠vel calcular seu cronotipo com os dados inseridos.')
        }
        //console.log('sono float: ' + durationSonoFloat);
        //console.log('sono string:' + durationSonoString);


        //feedback dura√ß√£o do sono
        if (dataAge >= 18 && dataAge <= 25) {
          setFeedbackSonoText(durationSonoWDString + " em dias de escola ou trabalho e " + durationSonoFDString + " em dias livres. √â recomendado que jovens adultos (18-25 anos) durmam de 7 a 9 horas (podendo tamb√©m ser 6 a 10 ou 11 horas). A falta de sono pode prejudicar a sua sa√∫de. Dormir √© imporante para guardar as informa√ß√µes que voc√™ aprendeu, para que seu corpo possa se defender de v√≠rus e bact√©rias que causam doen√ßas e para que as suas c√©lulas funcionem bem. Se voc√™ acha que est√° dormindo pouco, pense em como organizar seus hor√°rios de acordo com seu cronotipo e a sua necessidade de sono. Repare no quanto voc√™ se exp√µe √† luz, como √© o ambiente do seu quarto e se voc√™ se prepara para dormir. ")
        } else if (dataAge >= 26 && dataAge <= 64) {
          setFeedbackSonoText(durationSonoWDString + " em dias de trabalho e " + durationSonoFDString + " em dias livres. √â recomendado que adultos (26 - 64 anos) durmam de 7 a 9 horas (podendo tamb√©m ser 6 a 10 horas). A falta de sono pode prejudicar a sua sa√∫de. Dormir √© imporante para guardar as informa√ß√µes que voc√™ aprendeu, para que seu corpo possa se defender de v√≠rus e bact√©rias que causam doen√ßas e para que as suas c√©lulas funcionem bem. Se voc√™ acha que est√° dormindo pouco, pense em como organizar seus hor√°rios de acordo com seu cronotipo e a sua necessidade de sono. Repare no quanto voc√™ se exp√µe √† luz, como √© o ambiente do seu quarto e se voc√™ se prepara para dormir.")
        } else if (dataAge >= 65) {
          setFeedbackSonoText(durationSonoWDString + " em dias de trabalho e " + durationSonoFDString + " em dias livres. √â recomendado que idosos (‚â• 65 anos anos) durmam de 7 a 8 horas (podendo tamb√©m ser 5 ou 6 a 9 horas). A falta de sono pode prejudicar a sua sa√∫de. Dormir √© imporante para guardar as informa√ß√µes que voc√™ aprendeu, para que seu corpo possa se defender de v√≠rus e bact√©rias que causam doen√ßas e para que as suas c√©lulas funcionem bem. Se voc√™ acha que est√° dormindo pouco, pense em como organizar seus hor√°rios de acordo com seu cronotipo e a sua necessidade de sono. Repare no quanto voc√™ se exp√µe √† luz, como √© o ambiente do seu quarto e se voc√™ se prepara para dormir.")
        }

        //feedback regularidades e SJL
        var sjlCalculo = Math.abs(midpointSleepFD - midpointSleepWD);
        console.log('sjl calculo' + sjlCalculo);

        if (sjlCalculo !== undefined) {
          if (sjlCalculo > 1) {
            setFeedbackSJLText("Observamos que voc√™ apresenta " + sjlCalculo.toFixed(2) + " horas de jetlag social, sugerindo que a sua rotina de sono √© diferente entre dias de trabalho e dias livres. Voc√™ consegue organizar seus hor√°rios para tentar manter uma maior regularidade no seu sono sem abrir m√£o de dormir o suficiente? ")
          }
        }
        /* 
        if (msfsc !== undefined){
          if ((msfsc >= 4.5) && (sjlCalculo > 1)){
            setVespSJLText("Como voc√™ √© vespertino e seu jetlag social √© alto, pode ser que voc√™ tenha dificuldade para dormir e acordar nos hor√°rios que tem vontade. Se voc√™ gostaria de dormir mais cedo e n√£o consegue, tente ficar na luz do dia pela manh√£ (n√£o esque√ßa o filtro solar!). Tamb√©m evite se expor a telas (televis√£o, computador, celular) e luz azul pela noite. Estudos mostram que isso pode ajudar voc√™ a dormir mais cedo. Para saber mais, leia nossas recomenda√ß√µes sobre h√°bitos para manter seu sono saud√°vel.");
          } else if ((msfsc >= 4.5) && (durationSonoWDFloat < 6)){
            setVespSJLText("Como voc√™ √© vespertino e dorme menos que 6h horas em dias de escola/trabalho, o que pode n√£o ser suficiente, imaginamos que deve ser dif√≠cil para voc√™ dormir e acordar nos hor√°rios que gostaria. Se voc√™ gostaria de dormir mais cedo e n√£o consegue, tente ficar na luz do dia pela manh√£ (n√£o esque√ßa o filtro solar!). Tamb√©m evite se expor a telas (televis√£o, computador, celular) e luz azul pela noite. Estudos mostram que isso pode ajudar voc√™ a dormir mais cedo. Para saber mais, leia nossas recomenda√ß√µes sobre h√°bitos para manter seu sono saud√°vel");
          } else if ((msfsc >= 4.5) && (durationSonoWDFloat < 6) && (sjlCalculo > 1)){
            setVespSJLText("Como voc√™ √© vespertino, seu jetlag social √© alto e voc√™ dorme menos que 6h horas em dias de escola/trabalho, o que pode n√£o ser suficiente, imaginamos que deve ser dif√≠cil para voc√™ dormir e acordar nos hor√°rios que gostaria. Se voc√™ gostaria de dormir mais cedo e n√£o consegue, tente ficar na luz do dia pela manh√£ (n√£o esque√ßa o filtro solar!). Tamb√©m evite se expor a telas (televis√£o, computador, celular) e luz azul pela noite. Estudos mostram que isso pode ajudar voc√™ a dormir mais cedo. Para saber mais, leia nossas recomenda√ß√µes sobre h√°bitos para manter seu sono saud√°vel");
          }
        } */


      }

      //feedback SONO No Work
      else if ((dataSleepNoWork && dataWakeUpNoWork) !== (undefined || null || "undefined")) {

        var durationSonoFDFloat = diffHoursMinutes(dataWakeUpFD, dataSleepFD);
        var durationSonoFDString = converToHoursAndMinutes(durationSonoFDFloat);

        var durationSonoNoWorkFloat = diffHoursMinutes(dataWakeUpNoWork, dataSleepNoWork);
        var durationSonoNoWorkString = converToHoursAndMinutes(durationSonoNoWorkFloat);

        var soNW = timeStampToFloat(dataSleepNoWork);
        var seNW = timeStampToFloat(dataWakeUpNoWork);

        var soFD = timeStampToFloat(dataSleepFD);
        var seFD = timeStampToFloat(dataWakeUpFD);

        var midpointSleepNW = soNW + ((durationSonoNoWorkFloat) / 2);
        var midpointSleepFD = soFD + ((durationSonoFDFloat) / 2);

        console.log('midpoint sleep wd' + midpointSleepNW);
        console.log('midpoint sleep fd' + midpointSleepFD);

        var msfsc;
        if (durationSonoFDFloat <= durationSonoNoWorkFloat) {
          msfsc = midpointSleepFD;
        } else if (durationSonoFDFloat > durationSonoNoWorkFloat) {
          msfsc = midpointSleepFD - ((durationSonoFDFloat - durationSonoNoWorkFloat) / 2)
        }

        if (msfsc !== undefined) {
          console.log('entrou aqui msfsc: ' + msfsc);
          if (msfsc < 1.5) {
            setFeedbackCronoText('...matutino extremo. Isso significa que voc√™ se sente melhor dormindo mais cedo, o que pode ser uma vantagem em uma sociedade que inicia seus compromissos pela manh√£. No entanto, pessoas muito matutinas podem, √†s vezes, se for√ßar a dormir mais tarde quando t√™m alguma atividade social √† noite.')
            setCronoImage('1')
          } else if ((msfsc >= 1.5) && (msfsc < 3.5)) {
            setFeedbackCronoText('...matutino. Isso significa que voc√™ se sente melhor dormindo mais cedo, o que pode ser uma vantagem em uma sociedade que inicia seus compromissos pela manh√£. No entanto, pessoas muito matutinas podem, √†s vezes, se for√ßar a dormir mais tarde quando t√™m alguma atividade social √† noite.')
            setCronoImage('1')
          } else if ((msfsc >= 3.5) && (msfsc < 4.5)) {
            setFeedbackCronoText('...intermedi√°rio. Isso significa que voc√™ se sente bem com hor√°rios de sono nem t√£o cedo, nem t√£o tarde. A maioria das pessoas se encontra nesta categoria.')
            setCronoImage('2')
          } else if ((msfsc >= 4.5) && (msfsc < 6.5)) {
            setFeedbackCronoText('...vespertino. Isso significa que voc√™ se sente bem acordando e dormindo mais tarde. Isso n√£o quer dizer que voc√™ tem pregui√ßa, j√° que essa √© uma caracter√≠stica biol√≥gica sua.')
            setCronoImage('3')
          } else if ((msfsc >= 6.5)) {
            setFeedbackCronoText('...vespertino extremo. Isso significa que voc√™ se sente bem acordando e dormindo mais tarde. Isso n√£o quer dizer que voc√™ tem pregui√ßa, j√° que essa √© uma caracter√≠stica biol√≥gica sua.')
            setCronoImage('3')
          }
        } else {
          setFeedbackCronoText('N√£o foi poss√≠vel calcular seu cronotipo com os dados inseridos.')
        }

        var sjlCalculo = Math.abs(midpointSleepFD - midpointSleepNW);
        console.log('sjl calculo' + sjlCalculo);

        if (sjlCalculo !== undefined) {
          if (sjlCalculo > 1) {
            setFeedbackSJLText("Observamos que voc√™ apresenta " + sjlCalculo.toFixed(2) + " horas de jetlag social, sugerindo que a sua rotina de sono √© diferente entre dias de trabalho e dias livres. Voc√™ consegue organizar seus hor√°rios para tentar manter uma maior regularidade no seu sono sem abrir m√£o de dormir o suficiente? ")
          }
        }


        // console.log('t√° entrando aqui? ');
        var durationSonoFDFloat = diffHoursMinutes(dataWakeUpFD, dataSleepFD);
        var durationSonoFDString = converToHoursAndMinutes(durationSonoFDFloat);
        var durationSonoNoWork = diffHoursMinutes(dataWakeUpNoWork, dataSleepNoWork);
        var durationSonoNoWorkString = converToHoursAndMinutes(durationSonoNoWork);
        if (dataAge >= 18 && dataAge <= 25) {
          setFeedbackSonoText(durationSonoNoWorkString + " em dias de semana e " + durationSonoFDString + " em dias livres. √â recomendado que jovens adultos (18-25 anos) durmam de 7 a 9 horas (podendo tamb√©m ser 6 a 10 ou 11 horas). A falta de sono pode prejudicar a sua sa√∫de. Dormir √© imporante para guardar as informa√ß√µes que voc√™ aprendeu, para que seu corpo possa se defender de v√≠rus e bact√©rias que causam doen√ßas e para que as suas c√©lulas funcionem bem. Se voc√™ acha que est√° dormindo pouco, pense em como organizar seus hor√°rios de acordo com seu cronotipo e a sua necessidade de sono. Repare no quanto voc√™ se exp√µe √† luz, como √© o ambiente do seu quarto e se voc√™ se prepara para dormir. ")
        } else if (dataAge >= 26 && dataAge <= 64) {
          setFeedbackSonoText(durationSonoNoWorkString + " em dias de semana e " + durationSonoFDString + " em dias livres. √â recomendado que adultos (26 - 64 anos) durmam de 7 a 9 horas (podendo tamb√©m ser 6 a 10 horas). A falta de sono pode prejudicar a sua sa√∫de. Dormir √© imporante para guardar as informa√ß√µes que voc√™ aprendeu, para que seu corpo possa se defender de v√≠rus e bact√©rias que causam doen√ßas e para que as suas c√©lulas funcionem bem. Se voc√™ acha que est√° dormindo pouco, pense em como organizar seus hor√°rios de acordo com seu cronotipo e a sua necessidade de sono. Repare no quanto voc√™ se exp√µe √† luz, como √© o ambiente do seu quarto e se voc√™ se prepara para dormir.")
        } else if (dataAge >= 65) {
          setFeedbackSonoText(durationSonoNoWorkString + " em dias de semana e " + durationSonoFDString + " em dias livres. √â recomendado que idosos (‚â• 65 anos anos) durmam de 7 a 8 horas (podendo tamb√©m ser 5 ou 6 a 9 horas). A falta de sono pode prejudicar a sua sa√∫de. Dormir √© imporante para guardar as informa√ß√µes que voc√™ aprendeu, para que seu corpo possa se defender de v√≠rus e bact√©rias que causam doen√ßas e para que as suas c√©lulas funcionem bem. Se voc√™ acha que est√° dormindo pouco, pense em como organizar seus hor√°rios de acordo com seu cronotipo e a sua necessidade de sono. Repare no quanto voc√™ se exp√µe √† luz, como √© o ambiente do seu quarto e se voc√™ se prepara para dormir.")
        }
      }




    }
  }

  async function getFeedbackRegularidades() {
    const dbRef = await db.collection('users').doc(uid).get();
    const data = (await dbRef).data();
    if (data !== undefined) {

      const data2: any = data;
      const dataFeedReg = data2.feedReg;
      const dataSleepReg = data2.sleepReg;

      console.log('data feed reg: ', dataFeedReg);
      console.log('data sleep reg: ', dataSleepReg);
      console.log('resultado: ' + regularides(dataFeedReg, dataSleepReg));
      if (regularides(dataFeedReg, dataSleepReg) === 1) {
        setFeedbackRegularidadesText("Vimos que seus hor√°rios de alimenta√ß√£o s√£o regulares, o que √© muito bom para sua sa√∫de! No entanto, tome cuidado com suas rotinas de sono, pois dormir e acordar em hor√°rios regulares √© essencial para manter uma vida e um corpo saud√°vel.")
      } else if (regularides(dataFeedReg, dataSleepReg) === 2) {
        setFeedbackRegularidadesText("Vimos que seus hor√°rios alimenta√ß√£o e sono s√£o regulares, o que √© muito bom para sua sa√∫de. Continue assim!")
      } else if (regularides(dataFeedReg, dataSleepReg) === 3) {
        setFeedbackRegularidadesText("√â muito importante manter uma regularidade nas rotinas de alimenta√ß√£o e nos hor√°rios de sono. Que tal organizar o card√°pio e suas compras do supermercado para tentar manter uma regularidade no hor√°rio de alimenta√ß√£o? Al√©m disso, n√£o esque√ßa de que cuidar da rotina de sono √© importante para manter uma vida e um corpo saud√°vel.")
      } else if (regularides(dataFeedReg, dataSleepReg) === 4) {
        setFeedbackRegularidadesText("Vimos que seus hor√°rios de sono s√£o regulares. Isso pode ajudar a manter seu corpo saud√°vel! No entanto, seus hor√°rios de alimenta√ß√£o s√£o irregulares. Que tal organizar o card√°pio e suas compras do supermercado para tentar manter uma regularidade no hor√°rio de alimenta√ß√£o?")
      }


    }
  }

  async function getMetasDefinidas() {
    const dbRef = await db.collection('metas').doc(uid).get();
    const data = (await dbRef).data();

    if (data != undefined) {
      const data2: any = data;
      const dataMeta1Definida = data2.meta1Definida;
      const dataMeta2Definida = data2.meta2Definida;
      const dataMeta3Definida = data2.meta3Definida;

      //console.log("dataSaude: " + dataMeta1Definida)

      if (!(dataMeta1Definida === undefined)) {
        if (dataMeta1Definida === "sim") {
          setMeta1Definida(true)
        }

      }
      if (!(dataMeta2Definida === undefined)) {
        if (dataMeta2Definida === "sim") {
          setMeta2Definida(true)
        }

      }
      if (!(dataMeta3Definida === undefined)) {
        if (dataMeta3Definida === "sim") {
          setMeta3Definida(true)
        }

      }
    }
  }


  function createPDF() {

    let options = {
      //documentSize: 'A4',
      type: 'share'
    }
    const page1 = "<html> Voc√™ sabia que cada pessoa tem um rel√≥gio interno para organizar as fun√ß√µes do seu corpo? O cronotipo √© uma caracter√≠stica que representa como o seu rel√≥gio est√° organizado em rela√ß√£o ao ambiente, principalmente em rela√ß√£o ao dia e a noite.  Considerando seus hor√°rios de sono, estimamos que seu cronotipo √©... " + feedbackCronoText + "<br></html>";
    const page2 = "<br><html>Considerando os hor√°rios que voc√™ nos disse e, se n√£o costuma acordar muito durante a noite, a dura√ß√£o do seu sono √©... " + feedbackSonoText + feedbackSJLText + "<br></html>";
    const page3 = "<br><html> Ao responder nossas perguntas, voc√™ tamb√©m nos contou um pouco sobre h√°bitos que podem estar relacionados a manuten√ß√£o da sua sa√∫de. Aqui v√£o algumas informa√ß√µes que podem ser √∫teis para voc√™: " + feedbackRegularidadesText + "<br></html>";
    const page4 = "<br><html> Voc√™ nos contou um pouco sobre os seus h√°bitos. A partir disso, fazemos algumas sugest√µes abaixo." + feedbackLightText + feedbackHobbiesText + "<br></html>";
    const page5 = "<br><html>" + feedbackExerciseText + "Para saber mais sobre exerc√≠cios voc√™ pode acessar" + <a target="_blank" className={"link-text"} href="https://bvsms.saude.gov.br/bvs/publicacoes/guia_atividade_fisica_populacao_brasileira.pdf">aqui</a> + "<br></html>";
    const page6 = "<br><html>" + feedbackIMCText + feedbackMedText + feedbackFumoText + feedbackAlcoolText + "<br></html>";
    const page7 = "<br><html>" + "Considerando o que voc√™ nos contou sobre contato social e que ainda estamos em pandemia, fizemos algumas sugest√µes." + feedbackCIText + feedbackCI2Text + "<br></html>";
    const page8 = "<br><html>" + "√â sempre importante manter acompanhamento m√©dico regularmente. De forma geral, quanto antes uma doen√ßa for identificada mais f√°cil e barato √© seu tratamento, al√©m de lhe causar menos transtornos. Fa√ßa suas revis√µes regulares e evite surpresas." + feedbackBemEstarText + "Para saber mais sobre a pandemia do COVID-19, bons h√°bitos, rel√≥gio biol√≥gico e sono acesse no Menu a p√°gina de Recomenda√ß√µes!" + "<br></html>"


    PDFGenerator.fromData(page1 + page2 + page3 + page4 + page5 + page6 + page7 + page8, options)
      .then((base64: any) => console.log(base64)) 
      .catch((err: any) => console.error(err))


  }

  function sharingSocial() {

    /* 
    1:
    alt: Mascote do Regente matutino, em laranja. No fundo da anima√ß√£o um degrad√™ em laranja em ondas representando o dia.
        
    2:
    alt: Mascote do Regente vespertino, em azul escuro. No fundo da anima√ß√£o um degrad√™ em  azul escuro, em ondas representando a noite.

    3:
    alt: Mascote do Regente intermedi√°rio, em azul claro. No fundo da anima√ß√£o um degrad√™ em  azul, do claro para o escuro, em ondas representando a mistura entre o dia e a noite.
    */

    const imgs = ['https://imgur.com/wYsEA3S.png', 'https://imgur.com/fGm896F.png', 'https://imgur.com/kuCg9jd.png']
    const index = Number(cronoImage) - 1;

    SocialSharing.share('', '', imgs[index]);

  }

  function modalFeedbackInicial() {
    setShowModalFeedbackInicial(true);
    getFeedbackLight();
    getFeedbackHabitos();
    getIMC();
    getFeedbackSaude();
    getFeedbackContatoInicial();
    getFeedbackBemEstar();
    getFeedbackSono();
    getFeedbackRegularidades();
    console.log('crono image: ' + cronoImage);
  }

  //Checking the dates
  getSaudeDate()
  getContatoDate()
  getHabitosDate()
  getSonoSintomasDate()


  //Checking the dates post-14
  getSaudesPostDate()
  getContatoPostDate()
  getHabitosPostDate()
  getSonoSintomasPostDate()

  //Checking the final dates
  getSaudesFinalDate()
  getContatoFinalDate()
  getHabitosFinalDate()
  getSonoSintomasFinalDate()

  //Checking metas
  getMetasDefinidas()


  return (
    <IonPage>
      <IonHeader>
        <IonToolbar color="orange">

          <div id="header-items">
            <div className={"navigation"}>
              <IonButtons slot="start"> <IonMenuButton id="main"></IonMenuButton> </IonButtons>
            </div>
            <div className={"img-logo"}>
              <img src={logo_regente} className={"logo"} alt={"Logo regente"} />
            </div>
          </div>







          {/*
          <div id="header-items">
          <IonButton fill="clear" onClick={chamaPerfil}>PERFIL</IonButton>
          <IonButton fill="clear" onClick={chamaSobre}>SOBRE</IonButton>
          <IonButton onClick={Logout} color="tertiary">SAIR</IonButton> 
          </div>    */}
        </IonToolbar>


      </IonHeader>
      <IonLoading message="Por favor aguarde..." duration={0} isOpen={loader} />



      <IonContent fullscreen className="ion-text-center texto-padr√£o" color="background">

        {cronoImage === 'Carregando feedback...' ? <img className="img-home" src={home_gif} alt={"Anima√ß√£o em gif que come√ßa com o mascote do Regente matutino, em laranja, pulando, seguido pelo mascote do Regente vespertino, em azul escuro, pulando e por fim o mascote do Regente intermedi√°rio, em azul claro, tamb√©m pulando. No fundo da anima√ß√£o um degrad√™ em laranja"} /> : null}
        {cronoImage === '1' ? <img src={home_matutino} className="img-home" alt={"Mascote do Regente matutino, em laranja. No fundo da anima√ß√£o um degrad√™ em laranja em ondas representando o dia."} /> : null}
        {cronoImage === '2' ? <img src={home_intermed} className="img-home" alt={"Mascote do Regente vespertino, em azul escuro. No fundo da anima√ß√£o um degrad√™ em  azul escuro, em ondas representando a noite."} /> : null}
        {cronoImage === '3' ? <img src={home_vespertino} className="img-home" alt={"Mascote do Regente intermedi√°rio, em azul claro. No fundo da anima√ß√£o um degrad√™ em  azul, do claro para o escuro, em ondas representando a mistura entre o dia e a noite."} /> : null}




        <p className="texto-main">Ol√°, boas-vindas!</p>
        <p className="texto-padr√£o ">Para receber dicas personalizadas e ajudar a alimentar a pesquisa, preencha os formul√°rios abaixo! Ap√≥s preencher voc√™ tamb√©m poder√° definir metas e acompanhar suas atividades.</p>

        {/*
        <IonGrid>
       
       
       {/* <ExploreContainer name="Tab 1 page" /> */}
        {/* 
       <IonCard>
      <IonCardHeader>
        <IonCardSubtitle>Pesquisa</IonCardSubtitle>
       <IonCardTitle>O impacto do distanciamento social nos ritmos biol√≥gicos e na sa√∫de mental</IonCardTitle> 
       </IonCardHeader>
      <IonCardContent>
      <h1>TESTANDO AQUI - EDU!</h1>
      <p hidden={user.emailVerified}> O EMAIL N√ÉO √â VERIFICADO!</p>
      <p> De qualquer forma, esse texto aparece!</p>
      <div>
           <AuthCheck fallback={<IonTitle><b>BEM VINDO!</b></IonTitle>}><IonTitle><b>BEM VINDO, {user.email}!</b></IonTitle></AuthCheck>
         
          </div>  
      </IonCardContent>
      <IonCardContent>
    
       
        <div className="ion-text-wrap">
        
        <div>
        Caro participante, 
        </div>
        <div>
        Agradecemos a sua disposi√ß√£o em nos ajudar a entender as consequ√™ncias do <b>distanciamento social</b>.
        Com esse estudo, pretendemos encontrar maneiras de estar melhor preparados e munidos de mais informa√ß√£o para diminuir as consequ√™ncias 
           do distanciamento social na sa√∫de mental. 
         Al√©m disso, poderemos avaliar quais s√£o as recomenda√ß√µes mais 
           importantes para quem est√° passando por tal situa√ß√£o. </div>
          <div>
          Antes de come√ßar a responder, na pr√≥xima p√°gina, voc√™ poder√° ler mais sobre nosso estudo. 
           Caso desista de participar, basta fechar o aplicativo a qualquer momento.
           </div>
           <div>
           Muito obrigado!
           </div>
        </div>
        </IonCardContent>
      
        
        <IonCardContent>
        <div className={"ion-text"}>
          <b><span className={"red-text"}>Antes de come√ßarmos, voc√™ sabe o que √© distanciamento social? Confira a explica√ß√£o <a href={"/ExplanationSlides"}>aqui</a> e depois clique na aba "Formul√°rio" para iniciar a pesquisa.</span></b>
        </div>
        </IonCardContent>
        
      
        </IonCard>
       {/*
        <div>
          <img src={distanciamentoExp}/>
       </div> 
        
        </IonGrid> */}




        <div className="ion-text-center">

          <div id="outer">
            <div id="inner-modules">

              <Accordion allowZeroExpanded={true} className={"accordeon-pesquisa"}>

                <AccordionItem>
                  <AccordionItemHeading>
                    <AccordionItemButton className={"accordeon-button"} >
                      Primeira etapa
                    </AccordionItemButton>
                  </AccordionItemHeading>

                  <AccordionItemPanel>

                    <AccordionItemPanel>

                      <div>
                        <IonButton disabled={moduloSaudeEnviado}  onClick={saude} color="orange" fill="solid" className="button-forms"><div className="texto-button">Sa√∫de</div><img className="img-button" src={button_saude} width="80" height="80" alt={"Mascote do Regente matutino sorrindo e pulando corda com uma testeira branca e vermelha."} /></IonButton>
                      </div>

                    </AccordionItemPanel>
                   
                    <AccordionItemPanel>
                      <div>
                        <IonButton  disabled={moduloHabitosEnviado || !moduloSaudeEnviado} onClick={habitos} color="orange" fill="solid" className="button-forms"><div className="texto-button">Sono e h√°bitos</div><img className="img-button" src={button_habitos} width="80" height="80" alt={"Mascote do Regente vespertino sentado de olhos fechados com uma toquinha para dormir na cabe√ßa."} /></IonButton>
                      </div>
                    </AccordionItemPanel>
                    <AccordionItemPanel>
                      <div>
                        <IonButton  onClick={sonoSintomas} color="orange" fill="solid" className="button-forms"><div className="texto-button">Bem-estar</div><img className="img-button" src={button_sono} width="80" height="80" alt={" Mascote do Regente matutino de olhos fechados dormindo segurando um ursinho de pel√∫cia."} /></IonButton>
                      </div>
                    </AccordionItemPanel>
                    <AccordionItemPanel>
                      <div className={"texto-compartilhar"}>
                        {firstPartText}
                      </div>
                      <div>
                         
                        <IonButton disabled={!moduloSonoSintomasEnviado || (moduloSonoSintomasEnviado && minDaysPart1)} onClick={() => modalFeedbackInicial()} color="orange" fill="solid" shape="round" size="small"><IonIcon slot="start" icon={shareSocialOutline} /><div>Acessar dicas</div></IonButton>
                      </div>
                      <div>
                        <IonButton disabled={!moduloSonoSintomasEnviado || (moduloSonoSintomasEnviado && minDaysPart1) || meta1Definida} onClick={toAderencia} color="orange" fill="solid" shape="round" size="small"><IonIcon slot="start" icon={statsChartOutline} /><div>Acompanhe seu progresso</div></IonButton>
                      </div>

                      <IonModal isOpen={showModalSonoSintomas} showBackdrop={true}
                        cssClass='custom-modal selectable'
                        onDidDismiss={() => setShowModalSonoSintomas(false)}>
                        <IonContent color="primary">

                          <div className={"div-sonoSintomas"}>
                            <img src={sono3} alt="mascote no celular" className={"img-sonoSintomas"} />
                            <br />
                            <p className='sono-sintomas-modalText'>As perguntas a seguir se referem ao seu comportamento de sono nos dias de trabalho e dias livres. Por favor, responda de acordo com o que ocorreu mais frequentemente nas duas √∫ltimas semanas. Considere tamb√©m estudos e seus afazeres de casa. </p>
                            <p className='sono-sintomas-modalText'>Por favor, responda todas as quest√µes a seguir utilizando a escala de 24h (por exemplo, 23:00 no lugar de 11:00). Se voc√™ √© um estudante, preencha os dias de trabalho considerando os dias de aula.</p>
                          </div>
                          <div className="ion-text-center">
                            <IonButton color="white" onClick={() => setShowModalSonoSintomas(false)}>OK, entendi!</IonButton>
                          </div>

                        </IonContent>

                      </IonModal>

                      <IonModal isOpen={showModalFeedbackInicial} showBackdrop={true}
                        cssClass='custom-modal selectable'
                        onDidDismiss={() => setShowModalFeedbackInicial(false)}>
                        <IonContent>

                          <IonSlides pager={true} id={"slides"} onIonSlidesDidLoad={init}>
                            <IonSlide>
                              <IonToolbar color="white">
                                <div id="header-items">

                                  <p className={"header-title"}>Resultados</p>
                                  <IonButton className={"button-header"} fill="clear" slot="clear" onClick={() => setShowModalFeedbackInicial(false)}>Fechar</IonButton>


                                  <br />
                                </div>
                              </IonToolbar>




                              {cronoImage === '1' ? <p><img src={matutino_feliz} className="img-slides" alt={"Mascote do Regente matutino, em cor laranja, sorrindo."} /> </p> : null}
                              {cronoImage === '2' ? <p><img src={intermed_feliz} className="img-slides" alt={"Mascote do Regente intermedi√°rio, em cor azul claro, sorrindo."} /></p> : null}
                              {cronoImage === '3' ? <p><img src={vespertino_feliz} className="img-slides" alt={"Mascote do Regente vespertino, em cor azul escuro, sorrindo."} /></p> : null}


                              <div className={"arrows ion-no-padding"}>
                                <p>


                                  <IonButton className={"arrow-forward"} onClick={handleNext}><IonIcon src={arrowForwardOutline}></IonIcon></IonButton>
                                </p>
                              </div>
                              <br />
                              <p className={"readMore-text"}>Voc√™ receber√° informa√ß√µes e recomenda√ß√µes baseadas nas suas respostas. Tente ser o mais preciso poss√≠vel! Caso receba alguma informa√ß√£o ou recomenda√ß√£o n√£o adequada a voc√™, entre em contato conosco pelo e-mail regenteapp@gmail.com.</p>
                              <p className={"readMore-text"}>Voc√™ j√° percebeu que nem todo mundo dorme e acorda naturalmente no mesmo hor√°rio? Isso √© uma quest√£o biol√≥gica. N√£o se sinta culpado se n√£o conseguir acordar √†s 6h no seu melhor humor ou por n√£o ter vontade de ficar acordado conversando at√© as 23h com seus amigos: n√£o √© s√≥ uma quest√£o de h√°bito ou vontade. Cada pessoa tem seu pr√≥prio rel√≥gio biol√≥gico. Desse modo, h√° pessoas que se sentem mais ativas e dispostas mais cedo (os matutinos), e outras que se sentem assim mais tarde (os vespertinos). Chamamos de cronotipo as caracter√≠sticas individuais que explicam essas diferen√ßas. Com base no que voc√™ nos contou, estimamos seu cronotipo:</p>
                              <p className={"readMore-text-var"}>{feedbackRMEQText}</p>
                              <p>

                                <IonButton onClick={sharingSocial} color="orange" fill="solid" shape="round" size="small"><IonIcon slot="start" icon={shareSocialOutline} /> Compartilhar resultados </IonButton>
                              </p> <br />

                            </IonSlide>

                            <IonSlide>
                              <IonToolbar color="white">
                                <div id="header-items">

                                  <p className={"header-title"}>Resultados</p>
                                  <IonButton className={"button-header"} fill="clear" slot="clear" onClick={() => setShowModalFeedbackInicial(false)}>Fechar</IonButton>

                                </div>
                              </IonToolbar>


                              <p className={"readMore-text"}>A dura√ß√£o estimada do seu sono (sem considerar acordares √† noite) √©...</p>
                              <p className={"readMore-text-var"}>{feedbackSonoText}</p>
                              <p className={"readMore-text-var"}>{feedbackSJLText}</p>
                              <p className={"readMore-text"}>A necessidade de sono varia de pessoa para pessoa. Por isso, √© importante que voc√™ identifique quantas horas precisa para se sentir bem. Se voc√™ dorme muito menos em dias de trabalho, por exemplo, este √© um indicativo de que n√£o est√° dormindo suficiente nestes dias. Dormir √© imporante para a sa√∫de e ajuda voc√™ a aprender e ter boa mem√≥ria. Pense em como organizar seus hor√°rios de acordo com seu cronotipo e a sua necessidade de sono. Clique <a href={'/recomendacoes'}>aqui</a> para saber mais.</p>

                              <div className={"arrows ion-no-padding"}>
                                <p>
                                  <IonButton className={"arrow-back"} onClick={handlePrevious}><IonIcon src={arrowBackOutline}></IonIcon></IonButton>

                                  <IonButton className={"arrow-forward"} onClick={handleNext}><IonIcon src={arrowForwardOutline}></IonIcon></IonButton>
                                </p>
                              </div>
                              <br />

                              {cronoImage === '1' ? <p><img src={matutino_cansado} className="img-slides" alt={" Mascote do Regente matutino de olhos fechados dormindo segurando um ursinho de pel√∫cia."} /> </p> : null}
                              {cronoImage === '2' ? <p><img src={intermed_cansado} className="img-slides" alt={"Mascote do Regente intermedi√°rio de olhos fechados dormindo segurando um ursinho de pel√∫cia."} /></p> : null}
                              {cronoImage === '3' ? <p><img src={vespertino_cansado} className="img-slides" alt={"Mascote do Regente vespertino de olhos fechados dormindo segurando um ursinho de pel√∫cia."} /></p> : null}



                              <br />


                            </IonSlide>

                            <IonSlide>
                              <IonToolbar color="white">
                                <div id="header-items">

                                  <p className={"header-title"}>Resultados</p>
                                  <IonButton className={"button-header"} fill="clear" slot="clear" onClick={() => setShowModalFeedbackInicial(false)}>Fechar</IonButton>

                                </div>
                              </IonToolbar>

                              <p className={"readMore-text"}>Ao responder nossas perguntas, voc√™ tamb√©m nos contou um pouco sobre h√°bitos que podem estar relacionados a manuten√ß√£o da sua sa√∫de. Aqui v√£o algumas informa√ß√µes que podem ser √∫teis para voc√™:</p>
                              <p className={"readMore-text-var"}>{feedbackRegularidadesText}</p>
                              <div className={"arrows ion-no-padding"}>
                                <p>
                                  <IonButton className={"arrow-back"} onClick={handlePrevious}><IonIcon src={arrowBackOutline}></IonIcon></IonButton>

                                  <IonButton className={"arrow-forward"} onClick={handleNext}><IonIcon src={arrowForwardOutline}></IonIcon></IonButton>
                                </p>
                              </div>
                              <br />
                              <p><img src={sono_feedback} className="img-slides" alt={"Ilustra√ß√£o de um rel√≥gio, em azul claro, com um hamb√∫rguer no fundo."} /> </p>

                              <br />
                            </IonSlide>

                        

                            <IonSlide>
                              <IonToolbar color="white">
                                <div id="header-items">

                                  <p className={"header-title"}>Resultados</p>
                                  <IonButton className={"button-header"} fill="clear" slot="clear" onClick={() => setShowModalFeedbackInicial(false)}>Fechar</IonButton>

                                </div>
                              </IonToolbar>
                              <p className={"readMore-text"}>Voc√™ nos contou um pouco sobre os seus h√°bitos. A partir disso, fazemos algumas sugest√µes abaixo.</p>
                              <p className={"readMore-text-var"}>{feedbackLightText}</p>
                              
                              <div className={"arrows ion-no-padding"}>
                                <p>
                                  <IonButton className={"arrow-back"} onClick={handlePrevious}><IonIcon src={arrowBackOutline}></IonIcon></IonButton>

                                  <IonButton className={"arrow-forward"} onClick={handleNext}><IonIcon src={arrowForwardOutline}></IonIcon></IonButton>
                                </p>
                              </div>
                              <br />
                              <p><img src={sol} className="img-slides" alt={"Ilustra√ß√£o do sol com a cara do mascote do Regente matutino, em cor laranja, sorrindo."} /> </p>

                              <br />
                            </IonSlide>

                            <IonSlide>
                              <IonToolbar color="white">
                                <div id="header-items">

                                  <p className={"header-title"}>Resultados</p>
                                  <IonButton className={"button-header"} fill="clear" slot="clear" onClick={() => setShowModalFeedbackInicial(false)}>Fechar</IonButton>

                                </div>
                              </IonToolbar>


                              <p className={"readMore-text-var"}>{feedbackExerciseText}</p>
                              <p className={"readMore-text"}>Para saber mais sobre exerc√≠cios voc√™ pode acessar <a target="_blank" className={"link-text"} href="https://bvsms.saude.gov.br/bvs/publicacoes/guia_atividade_fisica_populacao_brasileira.pdf">aqui</a>.</p>
                              <div className={"arrows ion-no-padding"}>
                                <p>
                                  <IonButton className={"arrow-back"} onClick={handlePrevious}><IonIcon src={arrowBackOutline}></IonIcon></IonButton>

                                  <IonButton className={"arrow-forward"} onClick={handleNext}><IonIcon src={arrowForwardOutline}></IonIcon></IonButton>
                                </p>
                              </div>
                              <br />
                              {cronoImage === '1' ? <p><img src={matutino_corda} className="img-slides" alt={"Mascote do Regente matutino, em cor laranja, pulando corda com uma testeira branca e vermelha. Ele est√° feliz."} /> </p> : null}
                              {cronoImage === '2' ? <p><img src={intermed_corda} className="img-slides" alt={"Mascote do Regente intermedi√°rio, em cor azul claro, pulando corda com uma testeira branca e vermelha. Ele est√° feliz."} /></p> : null}
                              {cronoImage === '3' ? <p><img src={vespertino_corda} className="img-slides" alt={"Mascote do Regente vespertino, em cor azul escuro, pulando corda com uma testeira branca e vermelha. Ele est√° feliz."} /></p> : null}

                              <br />
                            </IonSlide>

                            <IonSlide>
                              <IonToolbar color="white">
                                <div id="header-items">

                                  <p className={"header-title"}>Resultados</p>
                                  <IonButton className={"button-header"} fill="clear" slot="clear" onClick={() => setShowModalFeedbackInicial(false)}>Fechar</IonButton>

                                </div>
                              </IonToolbar>

                             
                              <p className={"readMore-text-var"}>{feedbackIMCText}</p>
                              <p className={"readMore-text-var"}>{feedbackMedText}</p>
                              <p className={"readMore-text-var"}>{feedbackFumoText}</p>
                              <p className={"readMore-text-var"}>{feedbackAlcoolText}</p>
                              <div className={"arrows ion-no-padding"}>
                                <p>
                                  <IonButton className={"arrow-back"} onClick={handlePrevious}><IonIcon src={arrowBackOutline}></IonIcon></IonButton>

                                  <IonButton className={"arrow-forward"} onClick={handleNext}><IonIcon src={arrowForwardOutline}></IonIcon></IonButton>
                                </p>
                              </div>
                              <br />
                              <p><img src={imc} className="img-slides" alt={"Lista de afazeres com tr√™s itens. Os 3 primeiros itens est√£o marcados como feitos."} /> </p>
                              <br />
                            </IonSlide>


                            <IonSlide>
                              <IonToolbar color="white">
                                <div id="header-items">

                                  <p className={"header-title"}>Resultados</p>
                                  <IonButton className={"button-header"} fill="clear" slot="clear" onClick={() => setShowModalFeedbackInicial(false)}>Fechar</IonButton>

                                </div>
                              </IonToolbar>
                              <p className={"readMore-text"}>√â sempre importante manter acompanhamento m√©dico regularmente. De forma geral, quanto antes uma doen√ßa for identificada mais f√°cil e barato √© seu tratamento, al√©m de lhe causar menos transtornos. Fa√ßa suas revis√µes regulares e evite surpresas.</p>

                              <p className={"readMore-text-var"}>{feedbackBemEstarText}</p>
                              <p className={"readMore-text"}>Para saber mais sobre a pandemia do COVID-19, bons h√°bitos, rel√≥gio biol√≥gico e sono acesse no Menu a p√°gina de Recomenda√ß√µes!</p>
                              <div className={"arrows ion-no-padding"}>
                                <p>
                                  <IonButton className={"arrow-back"} onClick={handlePrevious}><IonIcon src={arrowBackOutline}></IonIcon></IonButton>


                                </p>
                              </div>
                              <br />
                              <br />
                              <IonButton onClick={createPDF}>gerar pdf</IonButton>

                              {cronoImage === '1' ? <p><img src={matutino_wave} className="img-slides" alt={"Mascote do Regente matutino, em cor laranja, sorrindo e abanando."} /> </p> : null}
                              {cronoImage === '2' ? <p><img src={intermed_wave} className="img-slides" alt={"Mascote do Regente intermedi√°rio, em cor azul claro, sorrindo e abanando."} /></p> : null}
                              {cronoImage === '3' ? <p><img src={vespertino_wave} className="img-slides" alt={" Mascote do Regente intermedi√°rio, em cor azul escuro, sorrindo e abanando."} /></p> : null}


                              <br />
                            </IonSlide>

                          </IonSlides>
                        </IonContent>
                      </IonModal>

                    </AccordionItemPanel>

                  </AccordionItemPanel>
                </AccordionItem>

              </Accordion>

              <Accordion allowZeroExpanded={true} className={"accordeon-pesquisa"}>
                <AccordionItem>
                  <AccordionItemHeading>
                    <AccordionItemButton className={"accordeon-button"}>
                      Segunda etapa
                    </AccordionItemButton>
                  </AccordionItemHeading>
                  <AccordionItemPanel>
                    <p>{secondPartText}</p>

                    <div>
                      <IonButton disabled={moduloSaudePostEnviado || !minDaysPart1}  onClick={saudePost} color="orange" fill="solid" className="button-forms"><div className="texto-button">Sa√∫de</div><img className="img-button" src={button_saude} width="80" height="80" alt={"Mascote do Regente matutino sorrindo e pulando corda com uma testeira branca e vermelha."} /></IonButton>
                    </div>
                  </AccordionItemPanel>
                 
                  <AccordionItemPanel>

                    <div>
                      <IonButton disabled={moduloHabitosPostEnviado || !moduloSaudePostEnviado} onClick={habitosPost} color="orange" fill="solid" className="button-forms"><div className="texto-button">Sono e h√°bitos </div><img className="img-button" src={button_habitos} width="80" height="80" alt={"Mascote do Regente vespertino sentado de olhos fechados com uma toquinha para dormir na cabe√ßa."} /></IonButton>
                    </div>
                  </AccordionItemPanel>
                  <AccordionItemPanel>
                    <div>
                      <IonButton disabled={moduloSonoSintomasPostEnviado || !moduloHabitosPostEnviado}  onClick={sonosintomasPost} color="orange" fill="solid" className="button-forms"><div className="texto-button">Bem-estar</div><img className="img-button" src={button_sono} width="80" height="80" alt={"Mascote do Regente matutino de olhos fechados dormindo segurando um ursinho de pel√∫cia."} /></IonButton>
                    </div>

                  </AccordionItemPanel>
                  <AccordionItemPanel>
                    <div className={"texto-compartilhar"}>
                      Finalize a segunda etapa e escolha mais metas para acompanhar!
                    </div>
                    <div>
                      <IonButton disabled={!moduloSonoSintomasPostEnviado || (moduloSonoSintomasPostEnviado && minDaysPart2) || meta2Definida} onClick={toAderenciaPost} color="orange" fill="solid" shape="round" size="small"><IonIcon slot="start" icon={statsChartOutline} /><div>Acompanhe seu progresso</div></IonButton>
                    </div>


                  </AccordionItemPanel>
                </AccordionItem>
              </Accordion>

              <Accordion allowZeroExpanded={true} className={"accordeon-pesquisa"}>
                <AccordionItem>
                  <AccordionItemHeading>
                    <AccordionItemButton className={"accordeon-button"}>
                      Terceira etapa
                    </AccordionItemButton>
                  </AccordionItemHeading>
                  <AccordionItemPanel>
                    <p>{thirdPartText}</p>

                    <div>
                      <IonButton  disabled={moduloSaudeFinalEnviado || !minDaysPart2} onClick={saudeFinal} color="orange" fill="solid" className="button-forms"><div className="texto-button">Sa√∫de</div><img className="img-button" src={button_saude} width="80" height="80" alt={"Mascote do Regente matutino sorrindo e pulando corda com uma testeira branca e vermelha."} /></IonButton>
                    </div>
                  </AccordionItemPanel>


                  <AccordionItemPanel>
                    <div>
                      <IonButton disabled={moduloHabitosFinalEnviado || !moduloSaudeFinalEnviado} onClick={habitosFinal} color="orange" fill="solid" className="button-forms"><div className="texto-button">Sono e h√°bitos</div><img className="img-button" src={button_habitos} width="80" height="80" alt={"Mascote do Regente vespertino sentado de olhos fechados com uma toquinha para dormir na cabe√ßa."} /></IonButton>
                    </div>
                  </AccordionItemPanel>

                  <AccordionItemPanel>
                    <div>
                      <IonButton disabled={moduloSonoSintomasFinalEnviado || !moduloHabitosFinalEnviado}  onClick={sonoSintomasFinal} color="orange" fill="solid" className="button-forms"><div className="texto-button">Bem-estar</div><img className="img-button" src={button_sono} width="80" height="80" alt={"Mascote do Regente matutino de olhos fechados dormindo segurando um ursinho de pel√∫cia."} /></IonButton>
                    </div>
                  </AccordionItemPanel>
                  <AccordionItemPanel>
                    <div className={"texto-compartilhar"}>
                      Finalize a √∫ltima etapa e escolha mais metas para acompanhar!
                    </div>
                    <div>
                      <IonButton disabled={!moduloSonoSintomasFinalEnviado || meta3Definida} onClick={toAderenciaFinal} color="orange" fill="solid" shape="round" size="small"><IonIcon slot="start" icon={statsChartOutline} /><div>Acompanhe seu progresso</div></IonButton>
                    </div>

                  </AccordionItemPanel>

                </AccordionItem>
              </Accordion>

            </div>
          </div>
        </div>


      </IonContent>
    </IonPage>
  );
};

export default Tab1;